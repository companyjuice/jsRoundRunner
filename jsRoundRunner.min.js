/**
 * Object:  jsRoundRunner
 * Version: master
 * Author:  Edouard Kombo
 * Twitter: @EdouardKombo
 * Github:  Edouard Kombo
 * Url:     https://github.com/edouardkombo/jsRoundRunner
 * 
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * 
 * Javascript counter application with many features that helps you count up and down.
 */

var jsRoundRunner=function(){};jsRoundRunner.prototype={startsAt:120,endsAt:0,changeColorAt:false,changeColorColor:"#FF0000",baseColor:"#000",rafTimer:"",allowMinutesAndSeconds:false,addToView:false,substituteTimer:"",counterTagId:"",callBack:"",stopped:false,timeOut:"",start:function(){this.substituteTimer=this.startsAt;this.rafTimer=requestAnimationFrame(this.runnerMethod.bind(this));this.stopped=false},runnerMethod:function(){this.timeOut=setTimeout(function(){if(true===this.stopped){this.substituteTimer=0;clearTimeout(this.timeOut)}this.substituteTimer=this.operator(this.substituteTimer);if(this.substituteTimer===this.endsAt){clearTimeout(this.timeOut);if(false===this.stopped){this.stopped=true;this.stop()}this.showCounter("")}else{this.showCounter(this.substituteTimer);this.rafTimer=requestAnimationFrame(this.runnerMethod.bind(this))}}.bind(this),1e3)},operator:function(e){return this.startsAt>this.endsAt?e-1:e+1},stop:function(){this.stopped=true;cancelAnimationFrame(this.rafTimer);clearTimeout(this.timeOut);this.rafTimer="";this.showCounter(this.substituteTimer);this.substituteTimer=this.startsAt>this.endsAt?this.endsAt:this.startsAt;this.allowMinutesAndSeconds=false;this.addToView=false;if(false!==this.changeColorAt){document.getElementById(this.counterTagId).style.setProperty("color",this.baseColor,"important")}this.changeColorAt=false;this.callbackMethod()},showCounter:function(e){if(e===""){document.getElementById(this.counterTagId).innerHTML=""}else{var t=this.convertToHHMMSS(this.substituteTimer);t=this.addViewToCounter(t);this.changeCounterColor();document.getElementById(this.counterTagId).innerHTML=t}},convertToHHMMSS:function(e){var t=Math.floor(e/3600);var n=Math.floor((e-t*3600)/60);var r=e-t*3600-n*60;t=this.formatNumbers(t,"hours");n=this.formatNumbers(n,"minutes");r=this.formatNumbers(r,"seconds");if(this.allowMinutesAndSeconds){var i=n+r}else{var i=t+n+r}return i},addViewToCounter:function(e){return false!==this.addToView?e+this.addToView:e},changeCounterColor:function(){if(false!==this.changeColorAt){if(this.substituteTimer>=this.changeColorAt){document.getElementById(this.counterTagId).style.setProperty("color",this.changeColorColor,"important")}}},formatNumbers:function(e,t){var n="";if(e===0){n=this.allowMinutesAndSeconds&&t==="minutes"?"0"+e+":":""}else if(e>=10){n=t!=="seconds"?e+":":e}else{n=t!=="seconds"?"0"+e+":":"0"+e}return n},callbackMethod:function(){return this.callBack()}}